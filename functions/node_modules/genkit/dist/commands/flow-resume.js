"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.flowResume = void 0;
const utils_1 = require("@genkit-ai/tools-common/utils");
const commander_1 = require("commander");
exports.flowResume = new commander_1.Command('flow:resume')
    .description('resume an interrupted flow (experimental)')
    .argument('<flowName>', 'name of the flow to resume')
    .argument('<flowId>', 'ID of the flow to resume')
    .argument('<data>', 'JSON data to use to resume the flow')
    .action(async (flowName, flowId, data) => {
    await (0, utils_1.runInRunnerThenStop)(async (runner) => {
        utils_1.logger.info(`Resuming '/flow/${flowName}'`);
        const state = (await runner.runAction({
            key: `/flow/${flowName}`,
            input: {
                resume: {
                    flowId,
                    payload: JSON.parse(data),
                },
            },
        })).result;
        utils_1.logger.info('Flow operation:\n' + JSON.stringify(state.operation, undefined, '  '));
    });
});
//# sourceMappingURL=flow-resume.js.map